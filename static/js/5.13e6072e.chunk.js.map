{"version":3,"sources":["assets/images/logo.svg","config/cognito.js","containers/Dashboard/index.js"],"names":["module","exports","awsConfig","s3","REGION","BUCKET","apiGateway","URL","cognito","USER_POOL_ID","APP_CLIENT_ID","IDENTITY_POOL_ID","signUpConfig","defaultCountryCode","signUpFields","label","key","placeholder","displayOrder","required","type","federatedConfig","amplifyCustomTheme","googleSignInButton","button","signInButtonIcon","Amplify","configure","Auth","mandatorySignIn","region","userPoolId","identityPoolId","userPoolWebClientId","Storage","bucket","API","endpoints","name","endpoint","Members","props","state","user","undefined","userAttributes","profilePic","level","inputElement","logout","bind","uploadProfilePicture","updateProfilePicture","deleteProfilePicture","currentAuthenticatedUser","picture","find","attr","Name","get","Value","console","log","this","setState","signOut","window","location","then","res","alert","message","catch","err","e","file","target","files","put","contentType","updateUserAttributes","r","className","src","logo","alt","username","onClick","click","testApi","ref","input","onChange","accept","Component","withAuthenticator","theme","federated"],"mappings":"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","file":"static/js/5.13e6072e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","const signUpConfig = {\n  // hiddenDefaults: ['phone_number'],\n  // header: 'Welcome!',\n  defaultCountryCode: '31',\n  signUpFields: [\n    {\n      label: 'First Name',\n      key: 'name',\n      placeholder: 'First Name',\n      displayOrder: 3,\n      required: true,\n      type: 'string'\n    },\n    {\n      label: 'Last Name',\n      key: 'family_name',\n      placeholder: 'Last Name',\n      displayOrder: 4,\n      required: true,\n      type: 'string'\n    },\n    {\n      label: 'Gender',\n      key: 'gender',\n      placeholder: 'Male',\n      displayOrder: 5,\n      required: true,\n      type: 'string'\n    },\n    {\n      label: 'Birthday',\n      key: 'birthdate',\n      displayOrder: 6,\n      required: true,\n      type: 'date'\n    }\n  ]\n}\n\nconst federatedConfig = {\n  // google_client_id: 'YOUR_GOOGLE_CLIENT_ID'\n}\n\nconst awsConfig = {\n  s3: {\n    REGION: 'eu-west-1',\n    BUCKET: 'cognito-boilerplate-dev-databucket'\n  },\n  apiGateway: {\n    REGION: 'eu-west-1',\n    URL: 'https://02fpavbitf.execute-api.eu-west-1.amazonaws.com/dev'\n  },\n  cognito: {\n    REGION: 'eu-west-1',\n    USER_POOL_ID: 'eu-west-1_GbjE92ghG',\n    APP_CLIENT_ID: '19uogvld04o5tpj0f11pmc9jes',\n    IDENTITY_POOL_ID: 'eu-west-1:78cfc9d8-7217-49a2-8f82-08ef34604e84'\n  }\n}\n\nconst amplifyCustomTheme = {\n  googleSignInButton: {\n    // backgroundColor: 'red',\n    // borderColor: 'red'\n    // fontSize: 12,\n    // fontWeight: 400,\n    // font: 'Arial'\n  },\n  button: {\n    // backgroundColor: '#fd5650',\n    // borderColor: '#fd5650'\n  },\n  signInButtonIcon: {\n    // display: 'none'\n  }\n}\n\nmodule.exports = {\n  awsConfig,\n  signUpConfig,\n  federatedConfig,\n  amplifyCustomTheme\n}\n","/* global alert */\nimport React, { Component } from 'react'\nimport Amplify, { Auth, API, Storage } from 'aws-amplify'\nimport { withAuthenticator } from 'aws-amplify-react'\n\nimport logo from '../../assets/images/logo.svg'\nimport './index.css'\nimport { awsConfig, signUpConfig, federatedConfig, amplifyCustomTheme } from '../../config/cognito'\n\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: awsConfig.cognito.REGION,\n    userPoolId: awsConfig.cognito.USER_POOL_ID,\n    identityPoolId: awsConfig.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: awsConfig.cognito.APP_CLIENT_ID\n  },\n  Storage: {\n    region: awsConfig.s3.REGION,\n    bucket: awsConfig.s3.BUCKET,\n    identityPoolId: awsConfig.cognito.IDENTITY_POOL_ID\n  },\n  API: {\n    endpoints: [\n      {\n        name: 'api',\n        endpoint: awsConfig.apiGateway.URL,\n        region: awsConfig.apiGateway.REGION\n      }\n    ]\n  }\n})\n\nclass Members extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      user: undefined,\n      userAttributes: undefined,\n      profilePic: undefined\n    }\n\n    Storage.configure({ level: 'private' })\n\n    this.inputElement = null\n    this.logout = this.logout.bind(this)\n    this.uploadProfilePicture = this.uploadProfilePicture.bind(this)\n    this.updateProfilePicture = this.updateProfilePicture.bind(this)\n    this.deleteProfilePicture = this.deleteProfilePicture.bind(this)\n  }\n\n  async componentDidMount () {\n    try {\n      // const user = await Auth.currentUserInfo()\n      const user = await Auth.currentAuthenticatedUser()\n      const userAttributes = await Auth.userAttributes(user)\n      const picture = userAttributes.find(attr => attr.Name === 'picture')\n\n      const profilePic = picture ? await Storage.get(picture.Value) : null\n\n      console.log('User', user)\n      console.log('Attributes', userAttributes)\n      console.log('ProfilePicture', profilePic)\n\n      this.setState({ user, profilePic })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  async logout () {\n    console.log('Logging out..')\n    try {\n      this.setState({ user: undefined })\n      await Auth.signOut()\n      window.location = '/'\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  async testApi () {\n    API.get('api', '/test')\n      .then(res => {\n        console.log(res)\n        alert(res.message)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  uploadProfilePicture (e) {\n    const file = e.target.files[0]\n    console.log(file)\n    Storage.put(`uploads/${file.name}`, file, {\n      contentType: 'image/png'\n    })\n      .then(res => {\n        return Auth\n          .updateUserAttributes(this.state.user, {\n            picture: res.key\n          })\n          .then((r) => {\n            console.log(r)\n            return Storage.get(res.key)\n          })\n      })\n      .then(this.updateProfilePicture)\n      .catch(err => console.log(err))\n  }\n\n  deleteProfilePicture () {\n    const { user } = this.state\n    Auth\n      .updateUserAttributes(user, {\n        picture: ''\n      })\n      .then(() => this.updateProfilePicture(null))\n      .then(console.log)\n  }\n\n  updateProfilePicture (e) {\n    this.setState({\n      profilePic: e\n    })\n  }\n\n  render () {\n    const { user, profilePic } = this.state\n    return (\n      <div className='App'>\n        <header className='App-header'>\n          <img\n            className={profilePic ? 'Profile-pic' : 'App-logo'}\n            src={profilePic || logo}\n            alt={profilePic ? 'Profile Picture' : 'Logo'}\n          />\n          <h1 className='App-title'>Welcome, { user && user.username}</h1>\n          <button\n            className='button'\n            onClick={() => {\n              this.inputElement.click()\n            }}\n          >\n            Update Image\n          </button>\n          {\n            (() => {\n              if (profilePic) {\n                return (\n                  <button\n                    className='button'\n                    onClick={this.deleteProfilePicture}\n                  >\n                    Remove Image\n                  </button>\n                )\n              }\n            })()\n          }\n          <button\n            className='button'\n            onClick={this.testApi}>\n            Test API\n          </button>\n          <button\n            className='button'\n            onClick={this.logout}>\n            Log Out\n          </button>\n          <input\n            className='file-upload-input'\n            type='file'\n            ref={input => {\n              this.inputElement = input\n            }}\n            onChange={this.uploadProfilePicture}\n            accept='image/*'\n          />\n          <p className='App-intro'>\n            To get started, edit <code>src/containers/Members/index.js</code> and save to reload.\n          </p>\n        </header>\n      </div>\n    )\n  }\n}\n\nexport default withAuthenticator(Members, {\n  // Render a sign out button once logged in\n  // includeGreetings: true,\n  signUpConfig,\n  theme: amplifyCustomTheme,\n  federated: federatedConfig\n  // Show only certain components\n  // authenticatorComponents: [MyComponents],\n})\n"],"sourceRoot":""}