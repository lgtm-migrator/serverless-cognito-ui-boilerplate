(window["webpackJsonpserverless-cognito-ui-boilerplate"]=window["webpackJsonpserverless-cognito-ui-boilerplate"]||[]).push([[5],{691:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},692:function(e,t,n){},693:function(e,t){e.exports={awsConfig:{s3:{REGION:"eu-west-1",BUCKET:"cognito-boilerplate-dev-databucket"},apiGateway:{REGION:"eu-west-1",URL:"https://02fpavbitf.execute-api.eu-west-1.amazonaws.com/dev"},cognito:{REGION:"eu-west-1",USER_POOL_ID:"eu-west-1_GbjE92ghG",APP_CLIENT_ID:"19uogvld04o5tpj0f11pmc9jes",IDENTITY_POOL_ID:"eu-west-1:78cfc9d8-7217-49a2-8f82-08ef34604e84"}},signUpConfig:{defaultCountryCode:"31",signUpFields:[{label:"First Name",key:"name",placeholder:"First Name",displayOrder:3,required:!0,type:"string"},{label:"Last Name",key:"family_name",placeholder:"Last Name",displayOrder:4,required:!0,type:"string"},{label:"Gender",key:"gender",placeholder:"Male",displayOrder:5,required:!0,type:"string"},{label:"Birthday",key:"birthdate",displayOrder:6,required:!0,type:"date"}]},federatedConfig:{},amplifyCustomTheme:{googleSignInButton:{},button:{},signInButtonIcon:{}}}},697:function(e,t,n){"use strict";n.r(t);var a=n(189),o=n.n(a),i=n(191),r=n(192),c=n(193),s=n(695),u=n(194),l=n(87),p=n(696),f=n(0),d=n.n(f),g=n(195),m=n.n(g),h=n(662),b=n(691),P=n.n(b),v=(n(692),n(693));m.a.configure({Auth:{mandatorySignIn:!0,region:v.awsConfig.cognito.REGION,userPoolId:v.awsConfig.cognito.USER_POOL_ID,identityPoolId:v.awsConfig.cognito.IDENTITY_POOL_ID,userPoolWebClientId:v.awsConfig.cognito.APP_CLIENT_ID},Storage:{region:v.awsConfig.s3.REGION,bucket:v.awsConfig.s3.BUCKET,identityPoolId:v.awsConfig.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"api",endpoint:v.awsConfig.apiGateway.URL,region:v.awsConfig.apiGateway.REGION}]}});var y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={user:void 0,userAttributes:void 0,profilePic:void 0},g.Storage.configure({level:"private"}),n.inputElement=null,n.logout=n.logout.bind(Object(l.a)(n)),n.uploadProfilePicture=n.uploadProfilePicture.bind(Object(l.a)(n)),n.updateProfilePicture=n.updateProfilePicture.bind(Object(l.a)(n)),n.deleteProfilePicture=n.deleteProfilePicture.bind(Object(l.a)(n)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.Auth.currentAuthenticatedUser();case 3:return t=e.sent,e.next=6,g.Auth.userAttributes(t);case 6:if(n=e.sent,!(a=n.find(function(e){return"picture"===e.Name}))){e.next=14;break}return e.next=11,g.Storage.get(a.Value);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0=null;case 15:i=e.t0,console.log("User",t),console.log("Attributes",n),console.log("ProfilePicture",i),this.setState({user:t,profilePic:i}),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(0),console.log(e.t1);case 25:case"end":return e.stop()}},e,this,[[0,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Logging out.."),e.prev=1,this.setState({user:void 0}),e.next=5,g.Auth.signOut();case 5:window.location="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"testApi",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.API.get("api","/test").then(function(e){console.log(e),alert(e.message)}).catch(function(e){console.log(e)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"uploadProfilePicture",value:function(e){var t=this,n=e.target.files[0];console.log(n),g.Storage.put("uploads/".concat(n.name),n,{contentType:"image/png"}).then(function(e){return g.Auth.updateUserAttributes(t.state.user,{picture:e.key}).then(function(t){return console.log(t),g.Storage.get(e.key)})}).then(this.updateProfilePicture).catch(function(e){return console.log(e)})}},{key:"deleteProfilePicture",value:function(){var e=this,t=this.state.user;g.Auth.updateUserAttributes(t,{picture:""}).then(function(){return e.updateProfilePicture(null)}).then(console.log)}},{key:"updateProfilePicture",value:function(e){this.setState({profilePic:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.user,a=t.profilePic;return d.a.createElement("div",{className:"App"},d.a.createElement("header",{className:"App-header"},d.a.createElement("img",{className:a?"Profile-pic":"App-logo",src:a||P.a,alt:a?"Profile Picture":"Logo"}),d.a.createElement("h1",{className:"App-title"},"Welcome, ",n&&n.username),d.a.createElement("button",{className:"button",onClick:function(){e.inputElement.click()}},"Update Image"),function(){if(a)return d.a.createElement("button",{className:"button",onClick:e.deleteProfilePicture},"Remove Image")}(),d.a.createElement("button",{className:"button",onClick:this.testApi},"Test API"),d.a.createElement("button",{className:"button",onClick:this.logout},"Log Out"),d.a.createElement("input",{className:"file-upload-input",type:"file",ref:function(t){e.inputElement=t},onChange:this.uploadProfilePicture,accept:"image/*"}),d.a.createElement("p",{className:"App-intro"},"To get started, edit ",d.a.createElement("code",null,"src/containers/Members/index.js")," and save to reload.")))}}]),t}(f.Component);t.default=Object(h.withAuthenticator)(y,{signUpConfig:v.signUpConfig,theme:v.amplifyCustomTheme,federated:v.federatedConfig})},72:function(e,t){}}]);
//# sourceMappingURL=5.13e6072e.chunk.js.map